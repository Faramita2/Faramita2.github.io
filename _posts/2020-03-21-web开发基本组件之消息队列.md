---
layout: post
title: "web开发基本组件之消息队列"
---

>前些日子，在做电商后台发放优惠券的功能时，和同事说到做这个的时候，同事说道：“一次性发放这么多优惠券出去，对数据库会操作很多吧，你可能要使用`消息队列`延迟执行任务”。由此开启了我对`消息队列`的认识和使用。

# 什么是消息队列(message queue)？

这里首先要分解开来，消息队列分为消息(message)和队列(queue)两部分，这两部分的定义单独拆开来的含义是什么呢。

消息(message)是指程序之间传输的一种约定好格式的数据。有可能是一个需要即将执行的任务，有可能是完成任务的数据，也有可能是一段纯文本。

队列(queue)是一种数据结构，其最基本的特点是`先进先出`(FIFO: First In First out)。

综合上述两者组成的基本概念，可以得知，消息队列(message queue)是一种程序之间传输消息或者下发任务等用途的队列，在消息队列中，产生消息的程序方一般被称为生产者(producer)，而接收消息(数据)或者处理任务的程序方被称为消费者(consumer)。

# 消息队列的特性(feature)?

消息队列(message queue)最重要的特性就是提供了一种程序之间异步通讯的协议。在一个很通常的例子邮件可以找到消息队列的影子。试想，每当发送或接收一封邮件时，发送方或接收方是否需要同时在线在客户端等着呢？不需要。为什么？在这种情况下，邮件被发送出来，都在服务器上被保存起来，放入消息队列等待客户端上线或者手动拉取时，才被消息队列的弹出，并下发到用户客户端。

可以见得消息队列很明显的一个地方在于`异步`，应用程序之间不需要同步的响应和处理，继续抽象来，这就是解耦(decouple)。因为在一定意义上，当两个应用之间不需要同步去执行和响应，可以理解为两者的关系淡化，分开去处理和实现。

在此基础之上，消息队列解耦了许多大型应用子应用的之间的关联，使它们之间不再那么紧密，又有了很多的想象空间。比如，拆分更细致之后，开发的分工更为明确，由于解耦了复杂的应用，故障和bug的数量会下降，专注于某个模块会更细致，开发的效率也会提升。

# 消息队列的应用(use case)？

to be continue...